<div ng-repeat="class in classes"
    ng-controller="canvasController"
    draggable="true"
    dnd-draggable="class"
    dnd-dragend="dragendHandler(event, class)"
    class="class ui-draggable ui-draggable-handle"
    ng-dblClick="doubleClick(class)"
    style="position:absolute;left:{{class.position[0]}}px;top:{{class.position[1]}}px;"
    data-id="{{class.id}}">

    <div class="ep" id="jsPlumb_1_12">âžœ</div>
    <div>
        <h1 class="heading element-name" ng-style="{ display: class.editMode === true ? 'none' : '' }">{{class.name}}</h1>
        <input class="edittext" ng-style="{ display: class.editMode === false ? 'none' : '' }" type="text" ng-model="class.name" ng-keyup="editNameKeyPressed(class, $event)">
    </div>
    <hr>
    <div class="attribute-holder" plumb-non-draggable>
        <ul dnd-list="class.attributes"
            dnd-dragover="true"
            style="position: relative;min-height: 30px;" 
            dnd-drop="class.onElementDropped(event, index, item, external, type, 'attributeObject')">
            
            <li ng-repeat="attribute in class.attributes"
                dnd-type="attributeObject"
                dnd-draggable="attribute"
            style="position: relative;" 
                dnd-effect-allowed="move"
                dnd-moved="class.attributes.splice($index, 1)"
                draggable="true"
                ng-dblClick="doubleClick(attribute); $event.stopPropagation()">
                <div ng-style="{ display: attribute.editMode === true ? 'none' : '' }">{{attribute.name}}</div>
                <input class="edittext" ng-style="{ display: attribute.editMode === false ? 'none' : '' }" type="text" ng-model="attribute.name" ng-keyup="editNameKeyPressed(attribute, $event); $event.stopPropagation()">
            </li>
        </ul>
    </div>
    <hr>
    <div class="operation-holder" plumb-non-draggable>
        <ul dnd-list="class.operations"
            dnd-dragover="true"
            style="position: relative;min-height: 30px;" 
            dnd-drop="class.onElementDropped(event, index, item, external, type, 'operationObject')">
            
            <li ng-repeat="operation in class.operations"
                dnd-type="operationObject"
                dnd-draggable="operation"
            style="position: relative;" 
                dnd-effect-allowed="move"
                dnd-moved="class.operations.splice($index, 1)"
                draggable="true"
                ng-dblClick="doubleClick(operation); $event.stopPropagation()">
                <div ng-style="{ display: operation.editMode === true ? 'none' : '' }">{{operation.name}}</div>
                <input class="edittext" ng-style="{ display: operation.editMode === false ? 'none' : '' }" type="text" ng-model="operation.name" ng-keyup="editNameKeyPressed(operation, $event); $event.stopPropagation()">
            </li>
        </ul>
    </div>
    </ul>
</div>
